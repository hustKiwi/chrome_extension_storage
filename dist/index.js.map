{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap 402f953139b1c2565a4b","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","lVK7","_defineProperty","obj","key","value","writable","_classCallCheck","instance","Constructor","TypeError","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","ChromeStorage","area","arguments","indexOf","Error","_area","chrome","storage","keys","_this","r","now","Date","Promise","resolve","expiresList","entries","forEach","_ref","_ref2","k","item","expires","parseInt","remove","join","_this2","runtime","lastError","console","error","clear","_ref3","_ref4","set","_this3","default"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chromeExtensionStorage\"] = factory();\n\telse\n\t\troot[\"chromeExtensionStorage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chromeExtensionStorage\"] = factory();\n\telse\n\t\troot[\"chromeExtensionStorage\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"lVK7\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"lVK7\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar STORAGE_EXPIRES_KEY = '__EXPIRES__';\n\nvar ChromeStorage = exports.ChromeStorage = function () {\n  function ChromeStorage() {\n    var area = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'local';\n\n    _classCallCheck(this, ChromeStorage);\n\n    if (['local', 'sync'].indexOf(area) < 0) {\n      throw new Error('Area ' + area + ' is not supported.');\n    }\n    this._area = chrome.storage[area];\n  }\n\n  _createClass(ChromeStorage, [{\n    key: 'get',\n    value: function get(keys) {\n      var _this = this;\n\n      var r = {};\n      var now = +new Date();\n\n      return new Promise(function (resolve) {\n        _this._area.get(keys, function (obj) {\n          var expiresList = [];\n\n          Object.entries(obj).forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                k = _ref2[0],\n                item = _ref2[1];\n\n            var expires = parseInt(item[STORAGE_EXPIRES_KEY], 10);\n\n            if (expires) {\n              if (expires < now) {\n                expiresList.push(k);\n              } else {\n                r[k] = item.value;\n              }\n            } else {\n              r[k] = item;\n            }\n          });\n\n          if (expiresList.length) {\n            _this._area.remove(expiresList.join(','), function () {\n              resolve(r);\n            });\n          } else {\n            resolve(r);\n          }\n        });\n      });\n    }\n  }, {\n    key: 'set',\n    value: function set(obj, expires) {\n      var _this2 = this;\n\n      // if the storage does not have enough space,\n      // it will alert a runtime error.\n      // refs:\n      //   - http://stackoverflow.com/a/23593477\n      //   - https://developer.chrome.com/extensions/runtime#property-lastError\n      if (chrome.runtime.lastError) {\n        /* eslint-disable no-console */\n        console.error(chrome.runtime.lastError);\n        /* eslint-enable no-console */\n        this._area.clear();\n      }\n\n      if (expires > 0) {\n        expires = +new Date() + expires;\n        Object.entries(obj).forEach(function (_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n              k = _ref4[0],\n              item = _ref4[1];\n\n          obj[k] = _defineProperty({\n            value: item\n          }, STORAGE_EXPIRES_KEY, expires);\n        });\n      }\n\n      return new Promise(function (resolve) {\n        _this2._area.set(obj, resolve);\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(keys) {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3._area.remove(keys, resolve);\n      });\n    }\n  }]);\n\n  return ChromeStorage;\n}();\n\nexports.default = new ChromeStorage();\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"lVK7\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 402f953139b1c2565a4b","const STORAGE_EXPIRES_KEY = '__EXPIRES__';\n\nexport class ChromeStorage {\n  constructor(area = 'local') {\n    if (['local', 'sync'].indexOf(area) < 0) {\n      throw new Error(`Area ${area} is not supported.`);\n    }\n    this._area = chrome.storage[area];\n  }\n\n  get(keys) {\n    const r = {};\n    const now = +new Date();\n\n    return new Promise((resolve) => {\n      this._area.get(keys, (obj) => {\n        const expiresList = [];\n\n        Object.entries(obj).forEach(([k, item]) => {\n          const expires = parseInt(item[STORAGE_EXPIRES_KEY], 10);\n\n          if (expires) {\n            if (expires < now) {\n              expiresList.push(k);\n            } else {\n              r[k] = item.value;\n            }\n          } else {\n            r[k] = item;\n          }\n        });\n\n        if (expiresList.length) {\n          this._area.remove(expiresList.join(','), () => {\n            resolve(r);\n          });\n        } else {\n          resolve(r);\n        }\n      });\n    });\n  }\n\n  set(obj, expires) {\n    // if the storage does not have enough space,\n    // it will alert a runtime error.\n    // refs:\n    //   - http://stackoverflow.com/a/23593477\n    //   - https://developer.chrome.com/extensions/runtime#property-lastError\n    if (chrome.runtime.lastError) {\n      /* eslint-disable no-console */\n      console.error(chrome.runtime.lastError);\n      /* eslint-enable no-console */\n      this._area.clear();\n    }\n\n    if (expires > 0) {\n      expires = +new Date() + expires;\n      Object.entries(obj).forEach(([k, item]) => {\n        obj[k] = {\n          value: item,\n          [STORAGE_EXPIRES_KEY]: expires,\n        };\n      });\n    }\n\n    return new Promise((resolve) => {\n      this._area.set(obj, resolve);\n    });\n  }\n\n  remove(keys) {\n    return new Promise((resolve) => {\n      this._area.remove(keys, resolve);\n    });\n  }\n}\n\nexport default new ChromeStorage();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}